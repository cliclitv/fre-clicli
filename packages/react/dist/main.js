(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(t,e,n){},33:function(t,e,n){},64:function(t,e,n){},68:function(t,e,n){},78:function(t,e){},80:function(t,e,n){},81:function(t,e,n){},83:function(t,e,n){},84:function(t,e,n){},85:function(t,e,n){},86:function(t,e,n){},87:function(t,e,n){},88:function(t,e,n){},89:function(t,e,n){},90:function(t,e,n){},91:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(34),i=n.n(o),c=n(95),l=n(3),s=n.n(l),u=n(4),h=n.n(u),f=n(5),p=n.n(f),d=n(6),m=n.n(d),v=n(1),g=n.n(v),y=n(96),E=n(93),k=n(35),R=n.n(k),C=n(8),b=n.n(C);function x(t){return t=t.replace("piaoquantv","yishihui")}var S="http://api.clicli.cc",w=n(17),q=n.n(w),N=n(7),B=n.n(N),O=B.a.create({baseURL:"http://api.clicli.cc"});function M(){return B.a.post("//api.clicli.cc/user/logout")}function P(t,e,n){return O.get("//api.clicli.cc/user",{params:{uname:t,uid:e,uqq:n}})}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}function T(t){return function(e){p()(a,e);var n=U(a);function a(t){var e;return s()(this,a),(e=n.call(this,t)).state={level:1},e}return h()(a,[{key:"componentDidMount",value:function(){var t=this;B.a.get("//api.clicli.cc/auth").then((function(e){401===e.data.code?t.props.history.push("/login"):t.setState({level:b.a.get("level")})}))}},{key:"render",value:function(){return r.a.createElement(t,q()({state:this.state},this.props))}}]),a}(r.a.Component)}var V,A=n(14);n(64);function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var K=Object(A.map)({state:["redirectTo"],mutations:["logout"]})(V=Object(y.a)(V=T(V=function(t){p()(n,t);var e=D(n);function n(){return s()(this,n),e.apply(this,arguments)}return h()(n,[{key:"onLogout",value:function(){var t=this;this.props.logout(),M().then((function(e){200===e.data.code&&t.props.history.push("/login")}))}},{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("ul",null,r.a.createElement(E.a,{to:"/"},r.a.createElement("li",null,"控制台")),this.props.state.level>=2?r.a.createElement(E.a,{to:"/write-article"},r.a.createElement("li",null,"撰写")):null,this.props.state.level>=3?r.a.createElement("li",null,"管理",r.a.createElement("ul",null,r.a.createElement(E.a,{to:"/posts/wait"},r.a.createElement("li",null,"审核稿件")),r.a.createElement(E.a,{to:"/posts/public"},r.a.createElement("li",null,"管理稿件")),r.a.createElement(E.a,{to:"/users/user"},r.a.createElement("li",null,"管理用户")))):null,r.a.createElement("li",{onClick:this.onLogout.bind(this),className:"logout"},"退出"),r.a.createElement("a",{href:"https://www.clicli.cc",target:"_blank"},r.a.createElement("li",{className:"logout"},"网站首页"))))}}]),n}(r.a.Component))||V)||V)||V,L=n(15),I=n.n(L);n(68);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var z,Q=function(t){p()(n,t);var e=j(n);function n(){return s()(this,n),e.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var t=this.props.text;return r.a.createElement("div",{className:"toptip",style:{background:this.props.bg}},t)}}]),n}(r.a.Component);n(29);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var J=T(z=function(t){p()(n,t);var e=_(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={qq:a.props.match.params.qq,msg:"",name:"",desc:"",level:""},a}return h()(n,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){var t=this;P("",0,this.state.qq).then((function(e){200===e.data.code&&t.setState(e.data.user)}))}},{key:"handleChange",value:function(t,e){this.setState(I()({},t,e))}},{key:"handleClick",value:function(){var t,e=this;(t=this.state,B.a.post("//api.clicli.cc/user/update/".concat(t.id),{name:t.name,pwd:t.pwd,qq:t.qq,level:parseInt(t.level),desc:t.desc},{headers:{token:b.a.get("token")}})).then((function(t){e.setState({msg:t.data.msg}),setTimeout((function(){e.setState({msg:""})}),5e3)}))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,this.state.msg?r.a.createElement(Q,{text:this.state.msg,bg:"#b4d896"}):null,r.a.createElement("div",{className:"editor-user"},r.a.createElement("h1",null,"编辑用户"),r.a.createElement("ul",null,r.a.createElement("li",null,"用户名：",r.a.createElement("input",{type:"text",value:this.state.name,onChange:function(e){return t.handleChange("name",e.target.value)}})),r.a.createElement("li",null,"密码：",r.a.createElement("input",{type:"text",placeholder:"留空则不修改",onChange:function(e){return t.handleChange("pwd",e.target.value)}})),r.a.createElement("li",null,"QQ：",r.a.createElement("input",{type:"text",value:this.state.qq,onChange:function(e){return t.handleChange("qq",e.target.value)}})),this.props.state.level>3?r.a.createElement("li",null,"权限：",r.a.createElement("select",{value:this.state.level,onChange:function(e){return t.handleChange("level",e.target.value)}},r.a.createElement("option",{value:"1"},"用户"),r.a.createElement("option",{value:"2"},"作者"),r.a.createElement("option",{value:"3"},"审核"),r.a.createElement("option",{value:"4"},"管理"))):null,r.a.createElement("li",null,"签名：",r.a.createElement("textarea",{value:this.state.desc,onChange:function(e){return t.handleChange("desc",e.target.value)}})),r.a.createElement("li",{className:"center"},r.a.createElement("button",{onClick:this.handleClick.bind(this)},"保存")))))}}]),n}(r.a.Component))||z,W=B.a.create({baseURL:S});function F(t,e,n,a,r,o){return W.get("/posts",{params:{status:t,sort:e,tag:n,uid:a,page:r,pageSize:o}})}function G(t){return B.a.post("/post/delete/".concat(t),{},{headers:{token:b.a.get("token")}})}var $=B.a.create({baseURL:S});function H(t){return B.a.post("/video/delete?pid=".concat(t),{},{headers:{token:b.a.get("token")}})}function X(t,e){return B.a.get("https://jx.clicli.us/upload/auth",{params:{fname:t,rname:e}})}var Y=n(38),Z=n.n(Y);n(80);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var et,nt=function(t){p()(n,t);var e=tt(n);function n(){return s()(this,n),e.apply(this,arguments)}return h()(n,[{key:"componentDidMount",value:function(){this.loadEditor()}},{key:"componentWillReceiveProps",value:function(t){this.props.defaultValue!==t.defaultValue&&this.mde.value(t.defaultValue)}},{key:"loadEditor",value:function(){this.mde=new Z.a({element:this.marked,autoDownloadFontAwesome:!0,status:!1,spellChecker:!1,forceSync:!0}),this.bindMde()}},{key:"bindMde",value:function(){var t=this;this.mde.codemirror.on("change",(function(){t.props.handleMde(t.mde.value())}))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"simpleMDE"},r.a.createElement("textarea",{ref:function(e){return t.marked=e},disabled:!0}))}}]),n}(r.a.Component);n(81);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var rt,ot=T(et=function(t){p()(n,t);var e=at(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={title:"",content:"",sort:"完结",status:"wait",msg:"",uid:parseInt(b.a.get("uid")),id:a.props.match.params.editor,text:"撰写",bg:"",tag:"",time:"",videos:[]},a}return h()(n,[{key:"componentDidMount",value:function(){this.loadArticle(),this.loadVideo(),"/write-article"===this.props.location.pathname?this.setState({text:"添加"}):this.setState({text:"更新"})}},{key:"handleChange",value:function(t,e){this.setState(I()({},t,e))}},{key:"changeMde",value:function(t){this.setState({content:t})}},{key:"loadArticle",value:function(){var t,e=this;this.state.id&&(t=this.state.id,W.get("/post/".concat(t))).then((function(t){var n=t.data.result,a=n.title,r=n.content,o=n.sort,i=n.tag,c=n.status,l=n.time;e.setState({title:a,content:r,sort:o,tag:i,status:c,time:l.slice(0,-3),defaultValue:r})}))}},{key:"loadVideo",value:function(){var t,e,n,a=this;this.state.id&&(t=this.state.id,e=1,n=100,$.get("/videos",{params:{pid:t,page:e,pageSize:n}})).then((function(t){a.setState({videos:t.data.videos})}))}},{key:"handleClick",value:function(){var t,e,n,a,r,o,i,c,l,s=this;if(!(this.state.title&&this.state.content&&this.state.status&&this.state.sort&&this.state.tag))return this.setState({msg:"都要填写都要填(〃＞皿＜)！",bg:"#ef736e"}),void setTimeout((function(){s.setState({msg:""})}),5e3);"/write-article"!==this.props.location.pathname?(t=this.state,e=t.id,n=t.title,a=t.content,r=t.status,o=t.sort,i=t.tag,c=t.uid,l=t.time,B.a.post("/post/update/".concat(e),{title:n,content:a,status:r,sort:o,tag:i,uid:c,time:l},{headers:{token:b.a.get("token")}})).then((function(t){200===t.data.code&&s.setState({msg:"更新成功啦！",text:"更新",bg:"#b4d896"}),setTimeout((function(){s.props.history.push("/article/".concat(s.state.uid)),s.setState({msg:""})}),5e3)})):function(t){var e=t.title,n=t.content,a=t.status,r=t.sort,o=t.tag,i=t.uid;return B.a.post("/post/add",{title:e,content:n,status:a,sort:r,tag:o,uid:i},{headers:{token:b.a.get("token")}})}(this.state).then((function(t){200===t.data.code&&s.setState({msg:"添加成功啦",bg:"#b4d896"}),setTimeout((function(){s.props.history.push("/article/".concat(s.state.uid)),s.setState({msg:""})}),5e3)}))}},{key:"selectTag",value:function(t){this.state.tag.indexOf(t)>-1?this.setState({tag:this.state.tag.replace(" ".concat(t),"")}):this.setState({tag:this.state.tag+" "+t})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,this.state.msg?r.a.createElement(Q,{text:this.state.msg,bg:this.state.bg}):null,r.a.createElement("div",{className:"write-article"},r.a.createElement("h1",null,this.state.text,"稿件"),r.a.createElement("li",null,r.a.createElement("input",{type:"text",placeholder:"请输入标题",value:this.state.title,onChange:function(e){return t.handleChange("title",e.target.value)}})),r.a.createElement(nt,{handleMde:function(e){return t.changeMde(e)},value:this.state.content,defaultValue:this.state.defaultValue}),r.a.createElement("span",null,r.a.createElement("select",{onChange:function(e){return t.handleChange("sort",e.target.value)},value:this.state.sort},r.a.createElement("option",{value:"原创"},"原创"),r.a.createElement("option",{value:"新番"},"新番"),r.a.createElement("option",{value:"完结"},"完结"),r.a.createElement("option",{value:"剧场版"},"剧场版"),r.a.createElement("option",{value:"影视"},"影视"))),r.a.createElement("span",null,r.a.createElement("select",{onChange:function(e){return t.handleChange("status",e.target.value)},value:this.state.status},r.a.createElement("option",{value:"wait"},"待审核"),r.a.createElement("option",{value:"remove"},"待删除"),r.a.createElement("option",{value:"under"},"已下架"),this.props.state.level>2?r.a.createElement("option",{value:"public"},"发布"):null)),r.a.createElement("span",null,"/write-article"===this.props.location.pathname?null:r.a.createElement("input",{type:"text",value:this.state.time,onChange:function(e){return t.handleChange("time",e.target.value)}})),r.a.createElement("div",{className:"tags"},r.a.createElement("ul",null,["推荐","转载","漫画改","小说改","耽美","乙女","百合","后宫","热血","战斗","运动","奇幻","神魔","搞笑","冒险","校园","恐怖","穿越","推理","科幻","日常","古风","恋爱","r15","泡面番","治愈","鬼畜","AMV/MAD","音乐·PV","游戏·GMV","VOCALOID","影视","特摄","真人剧","其它"].map((function(e,n){return r.a.createElement("li",{onClick:function(){return t.selectTag(e)},key:n,className:t.state.tag.indexOf(e)>-1?"active":""},e)})))),r.a.createElement("div",{className:"video-list"},this.state.videos?this.state.videos.map((function(t){return r.a.createElement(E.a,{to:"/editor-video/"+t.id,key:t.id},r.a.createElement("li",null,r.a.createElement("div",{className:"title"},t.oid)))})):null,"/write-article"===this.props.location.pathname?null:r.a.createElement(E.a,{to:"/add-video/".concat(this.state.id)},r.a.createElement("li",{className:"add"},r.a.createElement("div",null,"＋")))),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleClick.bind(this)},this.state.text,"稿件"))))}}]),n}(r.a.Component))||et,it=n(39),ct=n.n(it),lt=n(22),st=n.n(lt);function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var ht=T(rt=Object(y.a)(rt=function(t){p()(a,t);var e,n=ut(a);function a(t){var e;return s()(this,a),(e=n.call(this,t)).state={id:e.props.match.params.id,oid:"",title:"",content:"",pid:e.props.match.params.pid,text:"修改",uid:parseInt(b.a.get("uid")),zhilian:!0,per:0},e}return h()(a,[{key:"componentDidMount",value:function(){this.props.location.pathname.indexOf("add-video")>-1?this.setState({text:"添加"}):(this.loadVideo(),this.setState({text:"修改"}))}},{key:"loadVideo",value:function(){var t,e=this;(t=this.state.id,$.get("/video/".concat(t))).then((function(t){200===t.data.code&&e.setState(t.data.result)}))}},{key:"handleChange",value:function(t,e){this.setState(I()({},t,e))}},{key:"deleteVideo",value:function(){var t,e=this;(t=this.state.id,B.a.post("/video/delete?id=".concat(t),{},{headers:{token:b.a.get("token")}})).then((function(t){200===t.data.code&&(e.setState({msg:"删除成功啦"}),setTimeout((function(){e.props.history.goBack(),e.setState({msg:""})}),2e3))}))}},{key:"handleClick",value:function(){var t,e,n,a,r,o,i,c=this;this.props.location.pathname.indexOf("editor-video")>-1?(t=this.state,e=t.id,n=t.oid,a=t.title,r=t.content,o=t.pid,i=t.uid,r=x(r),B.a.post("/video/update/".concat(e),{oid:parseInt(n),title:a,content:r,pid:parseInt(o),uid:i},{headers:{token:b.a.get("token")}})).then((function(t){200===t.data.code&&c.setState({msg:"更新成功啦"}),setTimeout((function(){c.props.history.goBack(),c.setState({msg:""})}),2e3)})):this.addVideos()}},{key:"addVideos",value:function(){var t,e,n,a,r,o,i=this;(t=this.state,e=t.oid,n=t.title,a=t.content,r=t.pid,o=t.uid,a=x(a),B.a.post("/video/add",{oid:parseInt(e),title:n,content:a,pid:parseInt(r),uid:o},{headers:{token:b.a.get("token")}})).then((function(t){200===t.data.code&&i.setState({msg:"添加成功啦"}),setTimeout((function(){i.props.history.goBack(),i.setState({msg:""})}),2e3)}))}},{key:"onUpload",value:(e=ct()(st.a.mark((function t(){var e,n,a,r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n=this.refs.uploader.files[0],a=this.state.pid+" | "+this.state.oid,t.next=5,X(n.name,a).then((function(t){return t.data.uploadToken}));case 5:r=t.sent,console.log(r),new DogeUploader({file:n,token:r,next:function(t){e.setState({per:"".concat(Math.floor(t.percent))})},error:function(t){alert("上传出错( "+t.code+" )："+t.message)},complete:function(t){console.log("上传完成，视频 vid："+t.vid),e.setState({content:"".concat(t.vid,"@dogecloud"),per:0})}}).upload();case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"zhilian",value:function(){this.setState({zhilian:!this.state.zhilian})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,this.state.msg?r.a.createElement(Q,{text:this.state.msg,bg:"#b4d896"}):null,this.state.per?r.a.createElement("div",{className:"per"},this.state.per+"%"):null,r.a.createElement("div",{className:"editor-user"},r.a.createElement("h1",null,this.state.text,"视频"),r.a.createElement("ul",null,r.a.createElement("li",null,"序号：",r.a.createElement("input",{type:"text",value:this.state.oid,placeholder:"数字",onChange:function(e){return t.handleChange("oid",e.target.value)}})),r.a.createElement("li",null,"备注：",r.a.createElement("input",{type:"text",value:this.state.title,placeholder:"可不填",onChange:function(e){return t.handleChange("title",e.target.value)}})),r.a.createElement("li",null,r.a.createElement("span",{onClick:this.zhilian.bind(this)},this.state.zhilian?"直链":"上传"),"：",this.state.zhilian?r.a.createElement("input",{type:"text",value:this.state.content,placeholder:"支持mp4、m3u8等直链",onChange:function(e){return t.handleChange("content",e.target.value)}}):r.a.createElement("div",null,r.a.createElement("div",{id:"uploader"},r.a.createElement("span",null,"上传"),r.a.createElement("input",{type:"file",ref:"uploader",accept:"video/*",onChange:this.onUpload.bind(this)})),r.a.createElement("div",{style:{height:"55px"}}))," "),r.a.createElement("li",{className:"center"},r.a.createElement("button",{onClick:this.handleClick.bind(this)},"提交"),r.a.createElement("button",{onClick:this.deleteVideo.bind(this)},"删除")))))}}]),a}(r.a.Component))||rt)||rt,ft=n(16),pt=n.n(ft);function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}function mt(t){return function(e){p()(a,e);var n=dt(a);function a(t){var e;return s()(this,a),(e=n.call(this,t)).state={},e.handleChange=e.handleChange.bind(pt()(e)),e}return h()(a,[{key:"handleChange",value:function(t,e){this.setState(I()({},t,e))}},{key:"render",value:function(){return r.a.createElement(t,q()({handleChange:this.handleChange,state:this.state},this.props))}}]),a}(r.a.Component)}var vt;n(33);function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var yt,Et=Object(A.map)({state:["isAuth","msg","bg"],actions:["onLogin"]})(vt=mt(vt=Object(y.a)(vt=function(t){p()(n,t);var e=gt(n);function n(){return s()(this,n),e.apply(this,arguments)}return h()(n,[{key:"onKeyUp",value:function(t){13===t.keyCode&&this.onLogin()}},{key:"onLogin",value:function(){this.props.onLogin(this.props.state)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,this.props.isAuth?setTimeout((function(){t.props.history.push("/")}),2e3):null,this.props.msg?r.a.createElement(Q,{text:this.props.msg,bg:this.props.bg}):null,r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"登录"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("input",{type:"text",placeholder:"用户名",onChange:function(e){return t.props.handleChange("name",e.target.value)},onKeyUp:function(e){return t.onKeyUp(e)}})),r.a.createElement("li",null,r.a.createElement("input",{type:"password",placeholder:"密码",onChange:function(e){return t.props.handleChange("pwd",e.target.value)},onKeyUp:function(e){return t.onKeyUp(e)}})),r.a.createElement("li",null,r.a.createElement("button",{onClick:this.onLogin.bind(this)},"登录")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/register"},"注册")))))}}]),n}(r.a.Component))||vt)||vt)||vt;n(83);function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Rt,Ct=Object(y.a)(yt=function(t){p()(n,t);var e=kt(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={v:""},a}return h()(n,[{key:"selectInput",value:function(){this.props.history.push("".concat(this.props.prefix).concat(this.state.v))}},{key:"handleChange",value:function(t){this.setState({v:t})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"reach-box"},r.a.createElement("input",{type:"text",placeholder:this.props.text,onChange:function(e){return t.handleChange(e.target.value)}}),r.a.createElement("button",{onClick:this.selectInput.bind(this)},"跳转"))}}]),n}(r.a.Component))||yt;n(84);function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var xt=Object(y.a)(Rt=function(t){p()(n,t);var e=bt(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={users:[],uid:""},a}return h()(n,[{key:"componentDidMount",value:function(){var t,e=this;(t=this.props.match.params.level,O.get("//api.clicli.cc/users",{params:{level:t,page:1,pageSize:100}})).then((function(t){200===t.data.code&&e.setState({users:t.data.users})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"user-list"},r.a.createElement("div",{className:"role"},r.a.createElement(E.a,{to:"/users/user",style:{padding:"20px"}},"用户"),r.a.createElement(E.a,{to:"/users/author"},"作者"),r.a.createElement(E.a,{to:"/users/editor",style:{padding:"20px"}},"审核")),r.a.createElement("ul",null,"/users/user"===this.props.location.pathname?r.a.createElement(Ct,{text:"请输入qq",prefix:"/editor-user/"}):this.state.users.map((function(t){var e="http://q2.qlogo.cn/headimg_dl?dst_uin="+t.qq+"&spec=100";return r.a.createElement("li",{key:t.id},r.a.createElement(E.a,{to:"/editor-user/"+t.name},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:e,alt:""})),r.a.createElement("div",{className:"name"},t.name)))}))))}}]),n}(r.a.Component))||Rt;n(85),n(86);function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var wt,qt=function(t){p()(n,t);var e=St(n);function n(){return s()(this,n),e.apply(this,arguments)}return h()(n,[{key:"closeShow",value:function(){this.props.closeShow()}},{key:"confirm",value:function(){this.props.confirm(this.props.id)}},{key:"render",value:function(){return r.a.createElement("div",{className:"confirm"},r.a.createElement("div",{className:"text"},"确认删除吗？"),r.a.createElement("ul",{className:"option"},r.a.createElement("li",{onClick:this.closeShow.bind(this)},"取消"),r.a.createElement("li",{onClick:this.confirm.bind(this)},"确认")))}}]),n}(r.a.Component);B.a.create({baseURL:S});function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Bt,Ot=Object(y.a)(wt=function(t){p()(n,t);var e=Nt(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={isShow:!1,id:""},a}return h()(n,[{key:"handleDelete",value:function(t){var e,n=this;Promise.all([G(t),(e=t,B.a.post("/comment/delete?pid=".concat(e))),H(t)]).then((function(){n.props.refresh()})),this.setState({isShow:!1,id:""})}},{key:"handleShow",value:function(t){this.setState({isShow:!0,id:t})}},{key:"closeShow",value:function(){this.setState({isShow:!1})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"listview"},!0===this.state.isShow?r.a.createElement(qt,{id:this.state.id,confirm:this.handleDelete.bind(this),closeShow:this.closeShow.bind(this)}):null,r.a.createElement("li",{style:{border:"0",padding:"10px 20px",fontWeight:"bold"}},r.a.createElement("div",{className:"title",style:{color:"#444"}},"标题"),r.a.createElement("div",{className:"sort"},"分类"),r.a.createElement("div",{className:"status"},"状态"),r.a.createElement("div",{className:"action"},"操作")),r.a.createElement("ul",{style:{background:"#fff",padding:"0 10px"}},this.props.list?this.props.list.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"title"},r.a.createElement(E.a,{to:"/editor-article/"+e.id},e.title)),r.a.createElement("div",{className:"sort"},e.sort),r.a.createElement("div",{className:"status"},e.status),r.a.createElement("div",{className:"action"},r.a.createElement("i",{className:"icon-font icon-del",onClick:function(){t.handleShow(e.id)}}),r.a.createElement(E.a,{to:"/editor-article/"+e.id},r.a.createElement("i",{className:"icon-font icon-editor"}))))})):r.a.createElement("h1",null,"没有文章(′⌒`)")))}}]),n}(r.a.Component))||wt;function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Pt,Ut=Object(y.a)(Bt=function(t){p()(n,t);var e=Mt(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={posts:[]},a}return h()(n,[{key:"loadArticles",value:function(){var t=this;F(this.props.match.params.status,"","","",1,100).then((function(e){200===e.data.code&&t.setState({posts:e.data.posts})}))}},{key:"loadAuthorArticle",value:function(){var t=this;F("","","",this.props.match.params.author,1,100).then((function(e){200===e.data.code&&t.setState({posts:e.data.posts})}))}},{key:"refresh",value:function(){var t=this.props.location.pathname;if("/posts/wait"===t||"/posts/public"===t||"/posts/under"===t)return this.loadArticles();this.loadAuthorArticle()}},{key:"render",value:function(){return r.a.createElement("div",{className:"article-list"},r.a.createElement(Ct,{text:"请输入文章id",prefix:"/editor-article/"}),r.a.createElement(E.a,{to:"/posts/wait"},"待审核"),r.a.createElement(E.a,{to:"/posts/under",style:{padding:"20px"}},"已下架"),r.a.createElement(E.a,{to:"/posts/public"},"已发布"),r.a.createElement(Ot,{list:this.state.posts,refresh:this.refresh.bind(this)}))}},{key:"componentDidMount",value:function(){this.refresh()}}]),n}(r.a.Component))||Bt;function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Vt,At=mt(Pt=function(t){p()(n,t);var e=Tt(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={msg:"",bg:""},a.onRegister=a.onRegister.bind(pt()(a)),a}return h()(n,[{key:"onRegister",value:function(){var t,e=this;if(!(this.props.state.name&&this.props.state.pwd&&this.props.state.repeatPwd&&this.props.state.qq))return this.setState({msg:"都要填写都要填(〃＞皿＜)！",bg:"#ef736e"}),void setTimeout((function(){e.setState({msg:""})}),4500);(t=this.props.state,B.a.post("//api.clicli.cc/user/register",{name:t.name,pwd:t.pwd,qq:t.qq,level:1,desc:"人懒，竟然没有签名~"})).then((function(t){200===t.status&&201===t.data.code?(e.setState({msg:t.data.msg,bg:"#b4d896"}),setTimeout((function(){e.props.history.push("/login")}),2e3)):e.setState({msg:t.data.msg,bg:"#ef736e"})}))}},{key:"onKeyUp",value:function(t){13===t.keyCode&&this.onRegister()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,this.state.msg?r.a.createElement(Q,{text:this.state.msg,bg:this.state.bg}):null,r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"注册"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("input",{type:"text",placeholder:"QQ号",onChange:function(e){return t.props.handleChange("qq",e.target.value)},onKeyUp:function(e){return t.onKeyUp(e)}})),r.a.createElement("li",null,r.a.createElement("input",{type:"text",placeholder:"用户名",onChange:function(e){return t.props.handleChange("name",e.target.value)},onKeyUp:function(e){return t.onKeyUp(e)}})),r.a.createElement("li",null,r.a.createElement("input",{type:"password",placeholder:"密码",onChange:function(e){return t.props.handleChange("pwd",e.target.value)},onKeyUp:function(e){return t.onKeyUp(e)}})),r.a.createElement("li",null,r.a.createElement("input",{type:"password",placeholder:"确认密码",onChange:function(e){return t.props.handleChange("repeatPwd",e.target.value)},onKeyUp:function(e){return t.onKeyUp(e)}})),r.a.createElement("li",null,r.a.createElement("button",{onClick:this.onRegister},"注册")),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"返回首页")))))}}]),n}(r.a.Component))||Pt;n(87);function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Kt=T(Vt=function(t){p()(n,t);var e=Dt(n);function n(t){var a;return s()(this,n),(a=e.call(this,t)).state={user:{}},a}return h()(n,[{key:"componentDidMount",value:function(){var t=this;b.a.get("uid")&&P("",b.a.get("uid")).then((function(e){t.setState({user:e.data.user})}))}},{key:"render",value:function(){var t=function(t){if(/^[0-9]+$/.test(t))return"http://q1.qlogo.cn/g?b=qq&nk=".concat(t,"&s=5");var e=R()(t);return"https://cdn.v2ex.com/gravatar/".concat(e)}(this.state.user.qq),e="/article/"+this.state.user.id,n="/editor-user/"+this.state.user.qq;return r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:t,alt:"作者头像"})),r.a.createElement("div",{className:"name"},"欢迎！",this.state.user.name," sama~"),r.a.createElement("div",{className:"uid"},r.a.createElement("span",null,"uid : ",this.state.user.id)),r.a.createElement("div",{className:"quick-start"},"快速开始：","user"!==this.props.state.role?r.a.createElement("span",null,r.a.createElement(E.a,{to:"/write-article"},"投稿")):null,"user"!==this.props.state.role?r.a.createElement("span",null,r.a.createElement(E.a,{to:e},"查看稿件")):null,r.a.createElement("span",null,r.a.createElement(E.a,{to:n},"设置"))))}}]),n}(r.a.Component))||Vt,Lt=n(97),It=n(94);function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var zt=function(t){p()(n,t);var e=jt(n);function n(){return s()(this,n),e.apply(this,arguments)}return h()(n,[{key:"render",value:function(){return r.a.createElement(Lt.a,null,r.a.createElement(It.a,{path:"/login",component:Et}),r.a.createElement(It.a,{path:"/register",component:At}),r.a.createElement(It.a,{path:"/",render:function(t){return r.a.createElement("div",null,r.a.createElement(K,null),r.a.createElement(Lt.a,null,r.a.createElement(It.a,{path:"/editor-article/:editor",component:ot,key:"editor"}),r.a.createElement(It.a,{path:"/write-article",component:ot,key:"write"}),r.a.createElement(It.a,{path:"/editor-video/:id",component:ht,key:"editor-video"}),r.a.createElement(It.a,{path:"/add-video/:pid",component:ht,key:"add-video"}),r.a.createElement(It.a,{exact:!0,path:"/editor-user/:qq",component:J}),r.a.createElement(It.a,{path:"/article/:author",component:Ut,key:"author"}),r.a.createElement(It.a,{path:"/posts/:status",component:Ut,key:location.pathname}),r.a.createElement(It.a,{path:"/users/:role",component:xt,key:location.pathname}),r.a.createElement(It.a,{path:"/",component:Kt})))}}))}}]),n}(r.a.Component),Qt=(n(88),n(89),n(90),{onLogin:function(t,e){var n=t.commit;return e.name&&e.pwd||(n("errMsg","都要填都要填！"),setTimeout((function(){n("errMsg","")}),4500)),function(t){return B.a.post("//api.clicli.cc/user/login",{name:t.name,pwd:t.pwd})}(e).then((function(t){n("errMsg",""),200===t.status?n("login",t.data):(n("errMsg",t.data.msg),setTimeout((function(){n("errMsg","")}),4500))}))},onLogout:function(t){var e=t.commit;return M().then((function(t){200===t.data.code&&(e("logout",t.data),setTimeout((function(){e("errMsg","")}),4500))}))}}),_t=new A.Store({state:{isAuth:!1,redirectTo:"",bg:"",msg:"",user:{}},mutations:{login:function(t,e){t.msg=e.msg,t.isAuth=!0,t.bg="#b4d896"},errMsg:function(t,e){t.msg=e,t.bg="#ef736e"},logout:function(t){t.isAuth=!1,t.msg="退出成功啦",t.bg="#b4d896"}},actions:Qt});i.a.render(r.a.createElement(A.Provider,{store:_t},r.a.createElement(c.a,null,r.a.createElement(zt,null))),document.getElementById("app"))}},[[91,1,2]]]);